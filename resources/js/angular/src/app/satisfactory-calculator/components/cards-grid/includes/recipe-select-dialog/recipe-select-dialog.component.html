<h2 mat-dialog-title>Select recipe for {{ data.item }}</h2>

<mat-dialog-content>
    <mat-form-field class="recipe-field">
        <mat-label>Recipe</mat-label>
        <mat-select [(ngModel)]="selectedRecipe" name="selectedRecipe">
            <mat-option value="">System default</mat-option>
            <mat-option *ngFor="let option of data.options" [value]="option">
                <div class="recipe-option-label">{{ option }}</div>
                <small class="recipe-option-flags" *ngIf="getAlternateRecipeMeta(option) as meta">
                    <span class="meta-icons" *ngIf="hasAnyMetaFlag(meta)">
                        <ng-container *ngFor="let flag of metaFlags">
                            <span
                                *ngIf="isFlagTrue(meta[flag.key])"
                                class="meta-icon {{ flag.class }}"
                                [attr.title]="flag.tooltip"
                            >
                                {{ flag.short }}
                            </span>
                        </ng-container>
                    </span>
                </small>
            </mat-option>
        </mat-select>
    </mat-form-field>

    <div class="selected-recipe-meta" *ngIf="selectedRecipeMeta as meta">
        <div class="meta-icons selected-recipe-flags" *ngIf="hasAnyMetaFlag(meta)">
            <ng-container *ngFor="let flag of metaFlags">
                <span
                    *ngIf="isFlagTrue(meta[flag.key])"
                    class="meta-icon {{ flag.class }}"
                    [attr.title]="flag.tooltip"
                >
                    {{ flag.short }}
                </span>
            </ng-container>
        </div>
        <p class="selected-recipe-desc" *ngIf="meta.description">{{ meta.description }}</p>
    </div>
    <mat-checkbox *ngIf="data.showApplyScope" [(ngModel)]="applyToAll" name="applyToAll">
        Change for all production of this item?
    </mat-checkbox>
</mat-dialog-content>

<mat-dialog-actions align="end">
    <button mat-button mat-dialog-close>Cancel</button>
    <button mat-button (click)="save()" cdkFocusInitial>Apply</button>
</mat-dialog-actions>
